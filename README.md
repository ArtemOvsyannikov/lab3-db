# Отчёт по лабораторной работе №3

## I. Запуск проекта

### 1) Установка необходимых библиотек

Перед началом убедитесь, что у вас установлен Python 3. Далее, установите необходимые библиотеки, выполнив следующую команду в терминале:

```
pip install duckdb gdown pandas sqlalchemy psycopg2-binary
```

### 2) Клонирование репозитория

Клонируйте репозиторий в нужную директорию, выполнив следующую команду в терминале:

```
git clone https://github.com/ArtemOvsyannikov/lab3-db.git
```

### 3) Запуск скрипта

Перейдите в папку скачанного репозитория, затем в папку src и запустите lab3.py, выполнив следующую команду в терминале:

```
python3 lab3.py
```

## II. Визуализация результатов

###### Таблица с результатами запросов

![table](https://github.com/ArtemOvsyannikov/lab3-db/blob/main/images/table.png)

###### Гистограмма времени выполнения запросов с группировкой по библиотекам

![histogram](https://github.com/ArtemOvsyannikov/lab3-db/blob/main/images/histogram.png)

###### Линейный график увеличения времени выполнения запроса для каждой библиотеки

![line_graph](https://github.com/ArtemOvsyannikov/lab3-db/blob/main/images/line_graph.png)

## III. Отчёт по библиотекам

### Psycopg2

Если говорить о появившихся в процессе работы впечатлениях о данной библиотеки, то они достаточные смешанные, так как, в первую очередь, я сравнивал их с работой с pandas и sqlite, опыт в которых у меня был при выполнении некоторых задач по курсовой работе. С одной стороны, она предлагает достаточно эффективное взаимодействие с PostgreSQL и предоставляет огромное количество функций, но, с другой стороны, в плане удобности работы я поставлю ее на последнее место, так как приходится выполнять несколько “телодвижений”, в том числе, подключение к самому PostgreSQL и прочее, чтобы нормально выполнять поставленные ей задачи. Результаты по скорости также невыдающиеся, крепкая серединка, чуть лучше, чем SQLAlchemy, но разрыв на небольших данных не сильно большой. Особо много функционала для выполнения требований лабораторной работы не пригодилось, поэтому те огромные возможности, описанные ранее, являются в данном случае еще и минусом, так как мне совершенно не понадобились. Если говорить о том, почему были показаны такие результаты с точки зрения времени, то, поискав информацию в интернете, предположу, что это связано с системой “транзакций”, которая сопровождается подтверждением каждой операции, что существенно замедляет ее работу. Вторая возможная причина - более сложный API по сравнению с другими библиотеками. Это может замедлить скорость выполнения запросов, так как требуется больше времени на обработку запросов и взаимодействие с базой данных.

### SQLite

Одна из самых лучших библиотек, по моему мнению. Во-первых, ничего не нужно дополнительно устанавливать и прочее, просто импортировал в скрипт и сразу начал с ней работать. Очень легко разобраться с тем, как она работает и сразу применять в деле. Единственное, что с этой точки зрения немного расстроило - пришлось слегка поменять пару функций в запросах на те, которые поддерживаются SQLite, но на самом деле это мелочи. Да, она показала самый слабый по времени работы результат, но своими преимуществами она перекрывает, лично для меня, такой существенный недостаток. Почему же такой слабый результат? Возможные причины будут перечислены далее. Журналирование на диске: SQLite по умолчанию записывает свой журнал на диск, что в некоторых случаях может привести к более длительному времени выполнения. Операции в памяти: Несмотря на то, что SQLite может использовать память для хранения данных, это не всегда приводит к значительному увеличению скорости.

### DuckDB

Библиотека, которая меня приятно удивила. Сначала, когда я только начал писать код, который будет измерять время выполнения запроса на данной библиотеке, то столкнулся с такими же “телодвижениями”, как в случае с первой библиотекой. Это мне не особо понравилось, но порадовало, что не придется менять уже подготовленные запросы, что значительно упростило работу, так как можно было просто скопировать часть кода с замеров psycopg2. Потом я увидел результаты работы и был приятно удивлен, так как она значительно обогнала всех конкурентов, поэтому мне захотелось узнать, в чем секрет. DuckDB оптимизирован для выполнения аналитических запросов, что может улучшить производительность при работе с большими объемами данных. Однако, стоит выделить и некоторые потенциальные минусы, которые могут встречаться при работе с данной библиотекой. Ограниченная функциональность: В отличие от некоторых других библиотек, DuckDB может не иметь некоторых функций, которые могут быть полезны для более сложных или специализированных задач. Новизна: DuckDB относительно новый продукт, и, хотя он активно развивается, некоторые возможности могут быть еще не полностью разработаны и протестированы. Это может повлиять на стабильность и надежность библиотеки в некоторых случаях.

### Pandas

Вторая библиотека, с которой уже доводилось работать. Достаточно крутая библиотека, которая предоставляет обширную функциональность. Pandas предлагает широкий спектр функций для обработки и анализа данных, а также комбинируется с другими библиотеками для большей эффективности. Достаточно хорошие показатели выполнения запросов радуют, но на больших данных pandas может показывать менее крутой результат. Также данная библиотека достаточно сложная для новичков, так как лично мне было тяжело разобраться с нуля в ней и быстро начать использовать необходимый функционал.

### SQLAlchemy

Мое отношение к этой библиотеке не сильно будет отличаться от мнения по DuckDB и psycopg2, также требуются доп.шаги, связанные с работой с PostgreSQL, но, в целом, библиотека, как я узнал, достаточно многофункциональная и предлагает широкий спектр возможностей для взаимодействия, но все это становится минусом, когда требуется минимум функционала для выполнения какой-то некрупной задачи. Из-за предоставления таких крутых возможностей возникает слабый результат по времени.
